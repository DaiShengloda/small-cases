<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title>拖拽</title>
  <style>
      body{background-color:#4C4C4C;margin:0px;padding:0px;}
      body div{width:90px;height:90px;background-color:black;cursor:move;border:1px solid silver;position:absolute;}
      body span{width:90px;height:90px;background-color:black;cursor:move;border:1px solid silver;position:absolute;opacity:0.2;}    
  </style>
  </head>
  <body>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
  <script type="text/javascript">
      (function (){
          var box=document.getElementsByTagName("div"),
              span=document.getElementsByTagName("span");
          function createColor(){
              color="";
              var num=(Math.floor(Math.random()*254+1)).toString(16),
                  num2=(Math.floor(Math.random()*254+1)).toString(16),
                  num3=(Math.floor(Math.random()*254+1)).toString(16);
              color="#"+num+num2+num3;
              return color;    
          }
                      
          for(var i=0,len=box.length;i<len;i++){
              box[i].style.left=span[i].style.left="20px";
              box[i].style.top=span[i].style.top=90*i+20*(i+1)+"px";
              box[i].style.backgroundColor=span[i].style.backgroundColor=createColor();
              span[i].num=i;
              
              span[i].onmousedown=function (){
                  window.num=this.num; 
                  window.onmousemove=function (event){
                      x=event.clientX-box[this.num].clientWidth/2;
                      y=event.clientY-box[this.num].clientHeight/2;
                      span[this.num].style.left=x+"px";
                      span[this.num].style.top=y+"px";
                  }
              }
              span[i].onmouseup=function (){
                  window.onmousemove=function (event){
                      if (event.preventDefault){
                          event.preventDefault();
                      }else{
                          window.event.returnValue=false;
                      };                      
                  }                 
                  box[this.num].style.left=span[this.num].style.left;
                  box[this.num].style.top=span[this.num].style.top;
              }
          }                              
      })();
  </script>
  </body>
</html>
